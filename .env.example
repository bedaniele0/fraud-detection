# ============================================================================
# .env.example - Variables de Entorno del Proyecto
# ============================================================================
# Copiar este archivo a .env y completar con valores reales
#
# Autor: Ing. Daniel Varela Perez
# Email: bedaniele0@gmail.com
# Metodología: DVP-PRO
# ============================================================================

# Environment
ENVIRONMENT=production  # dev, staging, production

# API Configuration
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4
API_RELOAD=false

# Model Configuration
MODEL_PATH=models/improved_recall_threshold_model.pkl
MODEL_VERSION=1.0.0
OPTIMAL_THRESHOLD=0.5  # Fraud detection threshold

# MLflow Configuration
MLFLOW_TRACKING_URI=file:./mlruns  # o http://mlflow-server:5000
MLFLOW_EXPERIMENT_NAME=fraud-detection
MLFLOW_REGISTRY_URI=
MLFLOW_REGISTERED_MODEL_NAME=fraud-detection-model

# Data Configuration
DATA_PATH=data/raw/
PROCESSED_DATA_PATH=data/processed/
PREDICTIONS_PATH=data/predictions/
FRAUD_DATASET_PATH=data/raw/fraud_data.csv

# Monitoring
ENABLE_MONITORING=true
DRIFT_THRESHOLD=0.2  # PSI threshold
PERFORMANCE_CHECK_INTERVAL=3600  # seconds
ENABLE_DRIFT_DETECTION=true
ENABLE_PERFORMANCE_ALERTS=true

# Alertas - Slack
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL
SLACK_CHANNEL=#fraud-detection-alerts
SLACK_ENABLED=false

# Alertas - Microsoft Teams
TEAMS_WEBHOOK_URL=https://outlook.office.com/webhook/YOUR/WEBHOOK/URL
TEAMS_ENABLED=false

# Alertas - Email (opcional)
ALERT_EMAIL_FROM=alerts@yourcompany.com
ALERT_EMAIL_TO=bedaniele0@gmail.com
SMTP_SERVER=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=
SMTP_PASSWORD=
EMAIL_ENABLED=false

# Alertas - Webhook Genérico (opcional)
GENERIC_WEBHOOK_URL=
WEBHOOK_ENABLED=false

# Database (opcional - para logs de predicciones)
DATABASE_URL=postgresql://user:password@localhost:5432/fraud_detection
DB_POOL_SIZE=5
DB_MAX_OVERFLOW=10
DATABASE_ENABLED=false

# Redis (opcional - para caching)
REDIS_URL=redis://localhost:6379/0
CACHE_TTL=3600
REDIS_ENABLED=false

# Logging
LOG_LEVEL=INFO
LOG_FILE=logs/fraud_detection.log
LOG_FORMAT=json  # json o text
LOG_ROTATION=daily  # daily, weekly, monthly

# Security
API_KEY=
JWT_SECRET_KEY=
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8501
ENABLE_API_KEY_AUTH=false

# Prometheus & Grafana (opcional)
PROMETHEUS_PORT=9090
GRAFANA_PORT=3000
GRAFANA_ADMIN_PASSWORD=admin123
MONITORING_ENABLED=false

# Dashboard
DASHBOARD_PORT=8501
DASHBOARD_TITLE=Fraud Detection Dashboard
DASHBOARD_THEME=light  # light, dark

# Fraud Detection Specific
# Risk Bands
FRAUD_THRESHOLD_LOW=0.3       # PD < 30% = LOW RISK
FRAUD_THRESHOLD_MEDIUM=0.5    # 30% <= PD < 50% = MEDIUM RISK
FRAUD_THRESHOLD_HIGH=0.7      # 50% <= PD < 70% = HIGH RISK
# PD >= 70% = CRITICAL RISK

# Business Costs (para threshold optimization)
COST_FALSE_POSITIVE=100     # Cost of blocking legitimate transaction
COST_FALSE_NEGATIVE=10000   # Cost of missing fraud (chargebacks, etc.)
COST_TRUE_POSITIVE=50       # Benefit of catching fraud
COST_TRUE_NEGATIVE=1        # Cost of processing legitimate transaction

# Feature Engineering
ENABLE_FEATURE_ENGINEERING=true
FEATURE_VERSION=1.0.0

# Model Validation Thresholds
MIN_PRECISION=0.85
MIN_RECALL=0.70
MIN_F1_SCORE=0.75
MIN_ACCURACY=0.99
MAX_FALSE_POSITIVE_RATE=0.02

# Feature Flags
ENABLE_MLFLOW_TRACKING=true
ENABLE_FEATURE_STORE=false
ENABLE_REALTIME_PREDICTIONS=true
ENABLE_BATCH_PREDICTIONS=true
ENABLE_AB_TESTING=false
ENABLE_MODEL_REGISTRY=true

# Performance
MAX_BATCH_SIZE=1000
PREDICTION_TIMEOUT=30  # seconds
ENABLE_PARALLEL_PROCESSING=true
N_JOBS=-1

# Rate Limiting (API)
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=60  # seconds
ENABLE_RATE_LIMITING=false

# Explainability (SHAP)
ENABLE_SHAP_EXPLANATIONS=false
SHAP_SAMPLE_SIZE=100

# DVP-PRO Metadata
PROJECT_NAME=fraud-detection-system
PROJECT_VERSION=1.0.0
AUTHOR=Ing. Daniel Varela Perez
METHODOLOGY=DVP-PRO
CONTACT_EMAIL=bedaniele0@gmail.com
CONTACT_PHONE=+52 55 4189 3428

# Fraud Dataset Specific
FRAUD_DATASET_SIZE=284807  # Number of transactions
FRAUD_RATE=0.00172  # 0.172% fraud rate (highly imbalanced)
FRAUD_FEATURES_COUNT=30  # V1-V28 + Amount + Time

# Alert Thresholds
ALERT_FRAUD_RATE_SPIKE=0.01  # Alert if fraud rate > 1%
ALERT_API_ERROR_RATE=0.05  # Alert if API errors > 5%
ALERT_PREDICTION_LATENCY=2000  # Alert if latency > 2 seconds
ALERT_DRIFT_PSI=0.2  # Alert if PSI > 0.2

# Batch Processing
BATCH_PROCESSING_ENABLED=true
BATCH_SIZE=100
BATCH_INTERVAL_SECONDS=300  # 5 minutes

# Model Retraining
AUTO_RETRAIN_ENABLED=false
RETRAIN_FREQUENCY_DAYS=30
MIN_SAMPLES_FOR_RETRAIN=10000

# Testing
TEST_MODE=false
MOCK_MODEL_PREDICTIONS=false
GENERATE_SYNTHETIC_DATA=false
